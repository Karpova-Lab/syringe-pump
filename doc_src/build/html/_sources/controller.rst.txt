:github_url: https://github.com/Karpova-Lab/syringe-pump

================
Motor Controller
================

.. image:: images/PCB/render.png
  :width: 49%

.. image:: images/PCB/pcb_with_display.jpeg
  :width: 49%

.. image:: images/PCB/insertion.gif
  :width: 60%
  :align: center

The syringe pump is designed to be modular so that you can flexibly plug in whichever control board is compatible with your system.
This PCB is designed to work with pyControl, 

Bill of Materials
=================

.. raw:: html

  <div style="margin-bottom:24px">
    <a href="_static/ibom.html" style="background-color: #2980b9;
    border: none;
    color: white;
    padding: 10px 10px;
    text-align:center;
    text-decoration: none;
    display: inline-block;
    font-size: 18px;
    border-radius:15px">View interactive BOM</a>
  </div>
+-----+--------------------+--------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
| Qty | Reference          | Description              | Value/MPN                                                                                                                                           | 
+=====+====================+==========================+=====================================================================================================================================================+
| 5   | C1, C5, C6, C7, C8 | 0603 Capacitor           | `100nF <https://www.digikey.com/en/products/detail/samsung-electro-mechanics/CL10F104ZO8NNNC/3886916?s=N4IgTCBcDaIIxgOwDYC0CCsAOdqByAIiALoC%2BQA>`_ | 
+-----+--------------------+--------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
| 1   | C2                 | 1206 Capacitor           | `22µF <https://www.digikey.com/en/products/detail/CL31A226MOCLNNC/1276-2728-1-ND/3890814?itemSeq=362659788>`_                                       | 
+-----+--------------------+--------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
| 1   | C3                 | 1206 Capacitor           | `10µF <https://www.digikey.com/en/products/detail/tdk-corporation/CGA5L1X5R1C106M160AC/3950081>`_                                                   | 
+-----+--------------------+--------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
| 1   | C4                 | Electrolytic Capacitor   | `100µF <https://www.digikey.com/en/products/detail/EMZA350ADA101MF80G/565-2559-1-ND/757720?itemSeq=363115427>`_                                     | 
+-----+--------------------+--------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
| 1   | C9                 | 0603 Capacitor           | `2.2µF <https://www.digikey.com/en/products/detail/yageo/CC0603KRX5R8BB225/5195688>`_                                                               | 
+-----+--------------------+--------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
| 1   | C10                | 0603 Capacitor           | `22nF <https://www.digikey.com/en/products/detail/samsung-electro-mechanics/CL10B223KB8WPNC/5961018?s=N4IgTCBcDaIIxgOwDYC0yCsBmALKuIAugL5A>`_       | 
+-----+--------------------+--------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
| 4   | R1, R2, R3, R4     | 0603 Resistor            | `10KΩ <https://www.digikey.com/en/products/detail/yageo/RC0603JR-0710KL/726700?s=N4IgTCBcDaIMwEYEFoEAYDSBxASgYQBVkA5AERAF0BfIA>`_                   | 
+-----+--------------------+--------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
| 2   | R5, R6             | 0805 Resistor            | `0.3Ω <https://www.digikey.com/en/products/detail/panasonic-electronic-components/ERJ-6DQJR30V/6004330?s=N4IgTCBcDaIA4EYCcYAsB2AxgFxAXQF8g>`_       | 
+-----+--------------------+--------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
| 1   | J1                 | RJ45 Jack                | `0855025008 <https://www.digikey.com/en/products/detail/molex/0855025008/2404887?s=N4IgTCBcDaIO4FsDMBWALAdgMYBcC0AdgCYgC6AvkA>`_                    | 
+-----+--------------------+--------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
| 1   | J2                 | 16-pin Female Header     | `ESQ-116-12-T-S <https://www.digikey.com/en/products/detail/samtec-inc/ESQ-116-12-T-S/7098325?s=N4IgTCBcDaIKIGUCKBaAjGgbOsKAqKCKAcgCIgC6AvkA>`_     | 
+-----+--------------------+--------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
| 1   | J3                 | 12-pin Female Header     | `ESQ-112-12-T-S <https://www.digikey.com/en/products/detail/samtec-inc/esq-112-12-t-s/7097880>`_                                                    | 
+-----+--------------------+--------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
| 1   | J6                 | 7-pin Right Angle Male   | `Male header <https://www.digikey.com/en/products/detail/adam-tech/PH1RB-07-UA/9831064?s=N4IgTCBcDa4AwFYDsBaADgCwIwCcBGKcSIAugL5A>`_                | 
+-----+--------------------+--------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
| 1   | J7                 | 7-pin Right Angle Female | `Female header <https://www.digikey.com/en/products/detail/sullins-connector-solutions/PPTC071LGBN-RC/775901?s=N4IgTCBcDaIM4FYAsSDMIC6BfIA>`_       | 
+-----+--------------------+--------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
| 1   | U1                 | 3.3V Linear Regulator    | `AZ1117-3.3 <https://www.digikey.com/en/products/detail/AZ1117IH-3.3TRG1/AZ1117IH-3.3TRG1DICT-ND/5699682>`_                                         | 
+-----+--------------------+--------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
| 1   | U2                 | Microcontroller          | `ATSAMD21G <https://www.digikey.com/en/products/detail/microchip-technology/ATSAMD21G18A-AUT/4878867>`_                                             | 
+-----+--------------------+--------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
| 1   | U3                 | EEPROM                   | `AT24C01C-STUM <https://www.digikey.com/en/products/detail/microchip-technology/AT24C01C-STUM-T/3903734>`_                                          | 
+-----+--------------------+--------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
| 1   | U4                 | Motor Driver             | `TMC2209 <https://www.digikey.com/en/products/detail/trinamic-motion-control-gmbh/TMC2209-LA-T/10232491?s=N4IgTCBcDaIC4FsDGYwAYCcIC6BfIA>`_         | 
+-----+--------------------+--------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+


.. figure:: images/PCB/schematic.png
  :target: _static/schematic.pdf
  :align: center
  :width: 100%

  Schematic


.. PCB Files
.. =========

.. Use these files for ordering PCBs and solder paste stencils from your vendor of choice. 

.. Assembly
.. ========

.. Required Tools
.. --------------
.. - Soldering Iron
.. - wire strippers
.. - wire cutters

.. Programming
.. ===========

.. 1. Connect to ICSP pins
.. #. Burn bootloader
.. #. Upload syringe sketch.